<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Search Photos</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Tambahkan CSS search -->
    <link rel="stylesheet" href="css/search.css">

</head>
<body>

<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <div class="container-fluid">
        <a class="navbar-brand" href="index.html">Unsplash Client</a>
        <div class="collapse navbar-collapse">
            <ul class="navbar-nav ms-auto">
                <li class="nav-item"><a class="nav-link" href="index.html">Home</a></li>
                <li class="nav-item"><a class="nav-link active" href="search.html">Search</a></li>
                <li class="nav-item"><a class="nav-link" href="favorites.html">Favorites</a></li>
            </ul>
        </div>
    </div>
</nav>

<div class="container mt-4">

    <h1 class="text-center fw-bold mb-4">Find Amazing Photos</h1>

    <!-- Form Search -->
    <form id="search-form" class="mb-4" style="max-width: 800px; margin: auto;">
        <input type="text" id="query" class="form-control search-input"
               placeholder="Search inspiration â€” coffee, cat, mountains...">
    </form>

    <!-- RECOMMENDED SECTION -->
    <div id="recommended-section">
        <h3 class="section-title">Recommended</h3>
        <div id="recommended-photos" class="masonry mb-5"></div>
    </div>

    <!-- SEARCH RESULT SECTION -->
    <div id="search-section" style="display: none;">
        <h3 class="section-title">Search Results</h3>
        <div id="search-results" class="masonry"></div>
    </div>

</div>

<script src="config.js"></script>
<script src="js/app.js"></script>

<script>
// LOAD RECOMMENDED
async function loadRecommended() {
    const res = await fetch(`${UNSPLASH_API_URL}/photos?client_id=${UNSPLASH_ACCESS_KEY}`);
    const data = await res.json();
    displayMasonry(data, "recommended-photos");
}

// EVENT SEARCH
document.getElementById("search-form").addEventListener("submit", function(e) {
    e.preventDefault();

    const query = document.getElementById("query").value.trim();
    if (!query) return;

    // Sembunyikan rekomendasi saat search dilakukan
    document.getElementById("recommended-section").style.display = "none";

    // Tampilkan hasil search
    document.getElementById("search-section").style.display = "block";

    searchPhotos(query);
});

// CUSTOM DISPLAY FOR MASONRY
function displayMasonry(photos, containerId) {
    const container = document.getElementById(containerId);
    container.innerHTML = "";

    photos.forEach(photo => {
        container.innerHTML += `
            <a href="detail.html?id=${photo.id}" class="photo-card">
                <img src="${photo.urls.small}">
                <div class="overlay">
                    <p class="title">${photo.alt_description || "Untitled"}</p>
                    <p class="author">By ${photo.user.name}</p>
                </div>
            </a>
        `;
    });
}

// OVERRIDE SEARCH DISPLAY ONLY
const originalDisplay = displayPhotos;
displayPhotos = function(photos, containerId) {
    if (containerId === "search-results") {
        displayMasonry(photos, containerId);
    } else {
        originalDisplay(photos, containerId);
    }
};

loadRecommended();

</script>

</body>
</html>
